{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u05D0\\u05EA\\u05E8\\u05D0\\\\Desktop\\\\LeaderFinalProject-master\\\\react\\\\src\\\\components\\\\TasksToUser.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { actions } from '../Redux/Store/actions';\nimport { Link, withRouter } from 'react-router-dom';\nimport Task from './Task';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.userReducer.user,\n    task: state.taskReducer.task\n  };\n}\n\nconst mapDispatchToProps = dispatch => ({\n  addTask: task => dispatch(actions.addTask(task)),\n  setTask: task => dispatch(actions.setTask(task)),\n  deleteTask: id => dispatch(actions.deleteTask(id)),\n  setTasks: tasks => dispatch(actions.setTasks(tasks)),\n  setTaskInArr: task => dispatch(actions.setTaskInArr(task))\n});\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(_s(function Tasks(props) {\n  _s();\n\n  const {\n    user,\n    task,\n    addTask,\n    setTask,\n    deleteTask,\n    setTasks,\n    setTaskInArr,\n    history\n  } = props;\n  useEffect(() => {\n    fetch(`http://localhost:3001/getTasksToUser/${user.id}`, {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": localStorage.getItem('user')\n      }\n    }).then(res => {\n      if (res.status === 401) history.push('/error');else return res.json();\n    }).then(data => {\n      console.log(\"data: \", data);\n      setTasks(data.user);\n    }).catch(err => {\n      console.log(\"Error\");\n    });\n  }, []);\n\n  const addTaskFunc = task => {\n    let data = {\n      userId: user.id,\n      task: task\n    };\n    fetch(`http://localhost:3001/addTask`, {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": localStorage.getItem('user')\n      },\n      body: JSON.stringify(data)\n    }).then(res => {\n      if (res.status === 401) history.push('/error');else return res.json();\n    }).then(res => {\n      console.log(res.task);\n      addTask(res.task);\n      alert(\"The task was successfully added\");\n    }).catch(err => console.log(err));\n  };\n\n  function deleteTaskFunc(x) {\n    fetch(`http://localhost:3001/deleteTask/${x._id}/${user.id}`, {\n      method: \"delete\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": localStorage.getItem('user')\n      }\n    }).then(res => {\n      if (res.status === 401) history.push('/error');else return res.json();\n    }).then(res => {\n      if (res !== undefined) {\n        deleteTask(x._id);\n        alert(\"The task was successfully deleted\");\n      }\n    }).catch(err => console.log(err));\n  }\n\n  function updateTaskFunc() {\n    fetch(`http://localhost:3001/updateTask/${task._id}`, {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": localStorage.getItem('user')\n      },\n      body: JSON.stringify(task)\n    }).then(res => {\n      if (res.status === 401) history.push('/error');else return res.json();\n    }).then(res => {\n      if (res !== undefined) {\n        setTaskInArr(task);\n        alert(\"The task was successfully setted\");\n      }\n    }).catch(err => console.log(err));\n  }\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/tasks\",\n      style: {\n        margin: '1vw'\n      },\n      children: \"Back to the tasks list\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      className: \"btn btn-info\",\n      \"data-toggle\": \"modal\",\n      \"data-target\": \".add-task\",\n      children: \"Add a task alone\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal fade add-task\",\n      tabIndex: \"-1\",\n      role: \"dialog\",\n      \"aria-labelledby\": \"myLargeModalLabel\",\n      \"aria-hidden\": \"true\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-dialog modal-lg\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-content\",\n          children: /*#__PURE__*/_jsxDEV(Task, {\n            textButton: \"Add task\",\n            func: addTaskFunc\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }, this), user.tasks.length > 0 ? user.tasks.map((x, k) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      style: {\n        width: '18rem',\n        display: \"inline-block\",\n        margin: '2vw'\n      },\n      \"data-toggle\": \"tooltip\",\n      \"data-placement\": \"right\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        \"data-toggle\": \"modal\",\n        \"data-target\": \".bd-example-modal-sm\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"card-title\",\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: [\"Number of task: \", k + 1]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 52\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          style: {\n            height: '4rem'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"title:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 77\n          }, this), \" \", x.title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"card-text\",\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"completed:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 50\n          }, this), \" \", x.completed ? \"true\" : \"false\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          margin: '1vh'\n        },\n        type: \"button\",\n        className: \"btn btn-info\",\n        \"data-toggle\": \"modal\",\n        \"data-target\": \".set-task\",\n        onClick: () => setTask(x),\n        children: \"Set task\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal fade set-task\",\n        tabIndex: \"-1\",\n        role: \"dialog\",\n        \"aria-labelledby\": \"myLargeModalLabel\",\n        \"aria-hidden\": \"true\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-dialog modal-lg\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-content\",\n            children: /*#__PURE__*/_jsxDEV(Task, {\n              textButton: \"Set task\",\n              func: updateTaskFunc\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        style: {\n          margin: '1vh'\n        },\n        className: \"btn btn-info\",\n        onClick: e => deleteTaskFunc(x),\n        children: \"Delete task\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 21\n      }, this)]\n    }, k, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"there are no tasks to user: \", user.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true);\n}, \"OD7bBpZva5O2jO+Puf00hKivP7c=\")));","map":{"version":3,"sources":["C:/Users/אתרא/Desktop/LeaderFinalProject-master/react/src/components/TasksToUser.js"],"names":["React","useEffect","connect","actions","Link","withRouter","Task","mapStateToProps","state","user","userReducer","task","taskReducer","mapDispatchToProps","dispatch","addTask","setTask","deleteTask","id","setTasks","tasks","setTaskInArr","Tasks","props","history","fetch","method","headers","localStorage","getItem","then","res","status","push","json","data","console","log","catch","err","addTaskFunc","userId","body","JSON","stringify","alert","deleteTaskFunc","x","_id","undefined","updateTaskFunc","margin","length","map","k","width","display","height","title","completed","e","name"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { actions } from '../Redux/Store/actions';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport Task from './Task'\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        user: state.userReducer.user,\r\n        task: state.taskReducer.task\r\n    }\r\n}\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    addTask: (task) => dispatch(actions.addTask(task)),\r\n    setTask: (task) => dispatch(actions.setTask(task)),\r\n    deleteTask: (id) => dispatch(actions.deleteTask(id)),\r\n    setTasks: (tasks) => dispatch(actions.setTasks(tasks)),\r\n    setTaskInArr: (task) => dispatch(actions.setTaskInArr(task))\r\n})\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(function Tasks(props) {\r\n    const { user, task, addTask, setTask, deleteTask, setTasks, setTaskInArr, history } = props;\r\n    useEffect(() => {\r\n        fetch(`http://localhost:3001/getTasksToUser/${user.id}`, {\r\n            method: \"get\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": localStorage.getItem('user')\r\n            },\r\n        })\r\n            .then(res => {\r\n                if (res.status === 401)\r\n                    history.push('/error');\r\n                else\r\n                    return res.json()\r\n            })\r\n            .then((data) => {\r\n                console.log(\"data: \", data)\r\n                setTasks(data.user);\r\n            })\r\n            .catch(err => {\r\n                console.log(\"Error\");\r\n            }\r\n            )\r\n    }, [])\r\n    const addTaskFunc = (task) => {\r\n        let data = { userId: user.id, task: task };\r\n        fetch(`http://localhost:3001/addTask`, {\r\n            method: \"post\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": localStorage.getItem('user')\r\n            },\r\n            body: JSON.stringify(data)\r\n        })\r\n            .then(res => {\r\n                if (res.status === 401)\r\n                    history.push('/error');\r\n                else\r\n                    return res.json()\r\n            })\r\n            .then((res) => {\r\n                console.log(res.task)\r\n                addTask(res.task);\r\n                alert(\"The task was successfully added\");\r\n            })\r\n            .catch(err => console.log(err))\r\n    }\r\n    function deleteTaskFunc(x) {\r\n        fetch(`http://localhost:3001/deleteTask/${x._id}/${user.id}`, {\r\n            method: \"delete\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": localStorage.getItem('user')\r\n            },\r\n        })\r\n            .then(res => {\r\n                if (res.status === 401)\r\n                    history.push('/error');\r\n                else\r\n                    return res.json()\r\n            })\r\n            .then((res) => {\r\n                if (res !== undefined) {\r\n                    deleteTask(x._id);\r\n                    alert(\"The task was successfully deleted\");\r\n                }\r\n            })\r\n            .catch(err => console.log(err))\r\n    }\r\n    function updateTaskFunc() {\r\n        fetch(`http://localhost:3001/updateTask/${task._id}`, {\r\n            method: \"put\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n                \"Authorization\": localStorage.getItem('user')\r\n            },\r\n            body: JSON.stringify(task)\r\n        })\r\n            .then(res => {\r\n                if (res.status === 401)\r\n                    history.push('/error');\r\n                else\r\n                    return res.json()\r\n            })\r\n            .then((res) => {\r\n                if (res !== undefined) {\r\n                    setTaskInArr(task);\r\n                    alert(\"The task was successfully setted\");\r\n                }\r\n            })\r\n            .catch(err => console.log(err))\r\n    }\r\n    return (\r\n        <>\r\n            <Link to='/tasks' style={{ margin: '1vw' }}>Back to the tasks list</Link>\r\n            <button type=\"button\" className=\"btn btn-info\" data-toggle=\"modal\" data-target=\".add-task\">Add a task alone</button>\r\n            <div className=\"modal fade add-task\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"myLargeModalLabel\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog modal-lg\">\r\n                    <div className=\"modal-content\">\r\n                        <Task textButton=\"Add task\" func={addTaskFunc}></Task>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <br></br>\r\n            {user.tasks.length > 0 ? user.tasks.map((x, k) => (\r\n                <div className=\"card\" style={{ width: '18rem', display: \"inline-block\", margin: '2vw' }} key={k} data-toggle=\"tooltip\" data-placement=\"right\">\r\n                    <div className=\"card-body\" data-toggle=\"modal\" data-target=\".bd-example-modal-sm\">\r\n                        <h5 className=\"card-title\"><b>Number of task: {k + 1}</b></h5>\r\n                        <p className=\"card-text\" style={{ height: '4rem' }}><b>title:</b> {x.title}</p>\r\n                        <p className=\"card-text\"><b>completed:</b> {x.completed ? \"true\" : \"false\"}</p>\r\n                    </div>\r\n                    <button style={{ margin: '1vh' }} type=\"button\" className=\"btn btn-info\" data-toggle=\"modal\"\r\n                        data-target=\".set-task\" onClick={() => setTask(x)}>Set task</button>\r\n                    <div className=\"modal fade set-task\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"myLargeModalLabel\" aria-hidden=\"true\">\r\n                        <div className=\"modal-dialog modal-lg\">\r\n                            <div className=\"modal-content\">\r\n                                <Task textButton=\"Set task\" func={updateTaskFunc}></Task>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <button style={{ margin: '1vh' }} className=\"btn btn-info\" onClick={(e) => deleteTaskFunc(x)}>Delete task</button>\r\n                </div>\r\n            )) :\r\n                <p>there are no tasks to user: {user.name}</p>}\r\n        </>\r\n    )\r\n}))"]},"metadata":{},"sourceType":"module"}