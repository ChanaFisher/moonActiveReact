{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\\\u05D0\\u05EA\\u05E8\\u05D0\\\\Desktop\\\\LeaderFinalProject-master\\\\react\\\\src\\\\components\\\\Register.js\";\nimport React from 'react';\nimport Form from './Form';\nimport { connect } from 'react-redux';\nimport { actions } from '../Redux/Store/actions';\nimport { compose } from \"redux\";\nimport { withRouter } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction mapStateToProps(state) {\n  return {\n    user: state.userReducer.user\n  };\n}\n\nconst mapDispatchToProps = dispatch => ({\n  setId: id => dispatch(actions.setId(id)),\n  setTasks: tasks => dispatch(actions.setTasks(tasks))\n});\n\nexport default compose(withRouter, connect(mapStateToProps, mapDispatchToProps))(function Register(props) {\n  const {\n    user,\n    setId,\n    history\n  } = props;\n\n  const submitFunction = async () => {\n    let data = {\n      name: user.name,\n      password: user.password\n    };\n    fetch(\"http://localhost:3001/addUser\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n    }).then(res => res.json()).then(data => {\n      debugger;\n      setId(data.user._id);\n      localStorage.setItem('user', 'Bearer ' + data.token);\n      history.push('/tasks');\n    }).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(Form, {\n    textButton: \"register\",\n    submitFunction: () => submitFunction()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n});","map":{"version":3,"sources":["C:/Users/אתרא/Desktop/LeaderFinalProject-master/react/src/components/Register.js"],"names":["React","Form","connect","actions","compose","withRouter","mapStateToProps","state","user","userReducer","mapDispatchToProps","dispatch","setId","id","setTasks","tasks","Register","props","history","submitFunction","data","name","password","fetch","method","headers","body","JSON","stringify","then","res","json","_id","localStorage","setItem","token","push","catch","err","console","log"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,OAAT,QAAwB,wBAAxB;AACA,SAASC,OAAT,QAAwB,OAAxB;AACA,SAASC,UAAT,QAA2B,kBAA3B;;;AAEA,SAASC,eAAT,CAAyBC,KAAzB,EAAgC;AAC5B,SAAO;AACHC,IAAAA,IAAI,EAAED,KAAK,CAACE,WAAN,CAAkBD;AADrB,GAAP;AAGH;;AACD,MAAME,kBAAkB,GAAIC,QAAD,KAAe;AACtCC,EAAAA,KAAK,EAAGC,EAAD,IAAQF,QAAQ,CAACR,OAAO,CAACS,KAAR,CAAcC,EAAd,CAAD,CADe;AAEtCC,EAAAA,QAAQ,EAAGC,KAAD,IAAWJ,QAAQ,CAACR,OAAO,CAACW,QAAR,CAAiBC,KAAjB,CAAD;AAFS,CAAf,CAA3B;;AAIA,eAAeX,OAAO,CAACC,UAAD,EAAaH,OAAO,CAACI,eAAD,EAAkBI,kBAAlB,CAApB,CAAP,CAAkE,SAASM,QAAT,CAAkBC,KAAlB,EAAyB;AACtG,QAAM;AAAET,IAAAA,IAAF;AAAQI,IAAAA,KAAR;AAAeM,IAAAA;AAAf,MAA2BD,KAAjC;;AACA,QAAME,cAAc,GAAG,YAAY;AAC/B,QAAIC,IAAI,GAAG;AAAEC,MAAAA,IAAI,EAAEb,IAAI,CAACa,IAAb;AAAmBC,MAAAA,QAAQ,EAAEd,IAAI,CAACc;AAAlC,KAAX;AACAC,IAAAA,KAAK,CAAC,+BAAD,EAAkC;AACnCC,MAAAA,MAAM,EAAE,MAD2B;AAEnCC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAF0B;AAGnCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeR,IAAf;AAH6B,KAAlC,CAAL,CAKKS,IALL,CAKUC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EALjB,EAMKF,IANL,CAMWT,IAAD,IAAU;AACZ;AACAR,MAAAA,KAAK,CAACQ,IAAI,CAACZ,IAAL,CAAUwB,GAAX,CAAL;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA4B,YAAUd,IAAI,CAACe,KAA3C;AACAjB,MAAAA,OAAO,CAACkB,IAAR,CAAa,QAAb;AACH,KAXL,EAYKC,KAZL,CAYWC,GAAG,IAAIC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAZlB;AAaH,GAfD;;AAgBA,sBACI,QAAC,IAAD;AAAM,IAAA,UAAU,EAAC,UAAjB;AAA4B,IAAA,cAAc,EAAE,MAAMnB,cAAc;AAAhE;AAAA;AAAA;AAAA;AAAA,UADJ;AAGH,CArBc,CAAf","sourcesContent":["import React from 'react';\r\nimport Form from './Form';\r\nimport { connect } from 'react-redux';\r\nimport { actions } from '../Redux/Store/actions';\r\nimport { compose } from \"redux\";\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        user: state.userReducer.user\r\n    }\r\n}\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    setId: (id) => dispatch(actions.setId(id)),\r\n    setTasks: (tasks) => dispatch(actions.setTasks(tasks))\r\n})\r\nexport default compose(withRouter, connect(mapStateToProps, mapDispatchToProps))(function Register(props) {\r\n    const { user, setId, history } = props;\r\n    const submitFunction = async () => {\r\n        let data = { name: user.name, password: user.password };\r\n        fetch(\"http://localhost:3001/addUser\", {\r\n            method: \"post\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify(data)\r\n        })\r\n            .then(res => res.json())\r\n            .then((data) => {\r\n                debugger\r\n                setId(data.user._id);\r\n                localStorage.setItem('user','Bearer '+data.token)\r\n                history.push('/tasks');\r\n            })\r\n            .catch(err => console.log(err))\r\n    }\r\n    return (\r\n        <Form textButton=\"register\" submitFunction={() => submitFunction()}></Form>\r\n    )\r\n})\r\n"]},"metadata":{},"sourceType":"module"}